@main("Start Game") {
<script defer src='@routes.Assets.versioned("javascripts/start.js")' type="text/javascript"></script>
<link rel="stylesheet" media="screen" href='@routes.Assets.versioned("stylesheets/settings.css")'>
<div id="start-body">
	<div v-if="state === 'mode-select'" id="mode-select">
		<h1>Select a game mode</h1>
		<button @@click="state = 'settings1'">Play Singleplayer</button>
		<button @@click="state = 'settings2'">Create Multiplayer Lobby</button>
		<button @@click="state = 'list-lobbies'"> Join Multiplayer Lobby</button>
	</div>
	<form id="settings" @@submit.prevent="" v-if="state === 'settings1' || state === 'settings2'">
		<h2>Board Settings</h2>
		<div id="settings-inputs">
			<label v-if="state === 'settings2'">Username:</label>
			<input v-model="username" v-if="state === 'settings2'" type="text" :invalid="!username" required />

			<label>Board Width:</label>
			<input v-model="width" type="number" :invalid="!width" required min="1" max="32" />

			<label>Board Height:</label>
			<input v-model="height" type="number" :invalid="!height" required min="1" max="32" />

			<label>Bomb Chance:</label>
			<div id="range-wrapper">
				<input type="range" v-model="bomb_chance" required step="0.01" min="0" max="1" />
				<output>{{ (bomb_chance * 100).toFixed(0) }}%</output>
			</div>

			<label>Max Undos:</label>
			<input type="number" v-model="max_undos" :invalid="max_undos===''" required min="0" max="10" />
		</div>

		<div id="settings-buttons">
			<button v-if="state === 'settings1'" @@click="startGame()" :disabled="!width || !height || max_undos===''">Start Singleplayer</button>
			<button v-if="state === 'settings2'" @@click="selectMultiplayer()" :disabled="!width || !height || max_undos==='' || !username">Start Multiplayer Game</button>
		</div>
	</form>
	<div id="lobby-list" v-if="state === 'list-lobbies'">
		<h1>Lobbies</h1>
		<div id="opts">
			<label>Join as: </label>
			<input type="text" v-model="username" required />
			<button @@click="updateLobbies">Refresh List</button>
		</div>
		<div id="cards">
			<div v-for="lobby in lobbies" class="lobby-card">
				<span>{{lobby.name}}'s Lobby</span>
				<span>{{lobby.players.length}} Players</span>
				<button @@click="joinLobby(lobby.name)" :disabled="!username">Join</button>
			</div>
		</div>
	</div>
</div>
}
