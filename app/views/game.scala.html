@(params: GameViewParams)

@main("Minesweeper") {
	<link rel="stylesheet" media="screen" href="@routes.Assets.versioned("stylesheets/game.css")">
	<style>
		:root {
			--grid-width: @params.width;
			--grid-height: @params.height;
		}
	</style>
	<script>
		const imageBasePath = "@routes.Assets.versioned("images/")";
		console.log(imageBasePath);
	</script>
    <script defer src="@routes.Assets.versioned("javascripts/game.js")" type="text/javascript"></script>
	<div id="game">
		<h2>Time: <span id="time">@params.elapsed</span>s</h2>
		<h2>Undos: <span id="undos">@params.undos</span></h2>
		<div id="grid-container">
			@for((x, y, cell) <- params.cells) {
				@if(cell.isRevealed){
					@if(cell.isBomb) {
						<img
							src="@routes.Assets.versioned("images/bomb.png")"
							alt="cell"
							width="32px" height="32px"
							class="cell bomb"
							x="@x" y="@y"
						>
					} else if (cell.nearbyBombs == 0) {
						<img
							src="@routes.Assets.versioned("images/revealed.png")"
							alt="cell"
							width="32px" height="32px"
							class="cell revealed"
							x="@x" y="@y"
						>
					} else {
						<img
							src="@routes.Assets.versioned("images/" + cell.nearbyBombs.toString + ".png")"
							alt="cell"
							width="32px" height="32px"
							class="cell revealed-@cell.nearbyBombs.toString"
							x="@x" y="@y"
						>
					}
				} else if (cell.isFlagged) {
					<img
						src="@routes.Assets.versioned("images/flagged.png")"
						alt="cell"
						width="32px" height="32px"
						class="cell flagged"
						x="@x" y="@y"
						onclick="reveal(this)"
					>
				} else {
					<img
						src="@routes.Assets.versioned("images/unrevealed.png")"
						alt="cell"
						width="32px" height="32px"
						class="cell unrevealed"
						x="@x" y="@y"
						onclick="reveal(this)"
						oncontextmenu="flag(this)"
					>
				}
			}
		</div>
		<div id="button-container">
			<button onclick="main_menu()">Main Menu</button>
			<button onclick="undo()">Undo</button>
			<button onclick="redo()">Redo</button>
		</div>
	</div>
}
